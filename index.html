<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body><h1>LIBERARY</h1>
    <p>
        <br>
        CREATE TABLE PUBLISHER
(NAME VARCHAR (20) PRIMARY KEY, PHONE INTEGER,
ADDRESS VARCHAR (20));
        <br>
        <br>
CREATE TABLE BOOK
(BOOK_ID INTEGER PRIMARY KEY, TITLE VARCHAR(20),
PUB_YEAR VARCHAR(20),
PUBLISHER_NAME VARCHAR(20),
FOREIGN KEY(PUBLISHER_NAME) REFERENCES PUBLISHER (NAME) ON DELETE CASCADE);
                <br><br>
 CREATE TABLE BOOK_AUTHORS (AUTHOR_NAME VARCHAR (20),
BOOK_ID INTEGER,
FOREIGN KEY(BOOK_ID) REFERENCES BOOK(BOOK_ID) ON DELETE CASCADE,
PRIMARY KEY (BOOK_ID, AUTHOR_NAME));
CREATE TABLE LIBRARY_PROGRAMME (PROGRAMME_ID INTEGER PRIMARY KEY, PROGRAMME_NAME VARCHAR(50), ADDRESS VARCHAR2 (50));
        <br><br>
CREATE TABLE BOOK_COPIES(NO_OF_COPIES INTEGER,
BOOK_ID INTEGER,
FOREIGN KEY(BOOK_ID) REFERENCES BOOK (BOOK_ID) ON DELETE CASCADE,
PROGRAMME_ID INTEGER,
FOREIGN KEY(PROGRAMME_ID) REFERENCES LIBRARY_ PROGRAMME (PROGRAMME _ID) ON DELETECASCADE,
PRIMARY KEY (BOOK_ID, PROGRAMME _ID));
        <br><br>
CREATE TABLE CARD
(CARD_NO INTEGER PRIMARY KEY);
        <br><br>
CREATE TABLE BOOK_LENDING (DATE_OUT DATE,
DUE_DATE DATE,
BOOK_ID INTEGER,
FOREIGN KEY(BOOK_ID) REFERENCES BOOK (BOOK_ID) ON DELETE CASCADE,
PROGRAMME_ID INTEGER,
FOREIGN KEY(PROGRAMME_ID) REFERENCESLIBRARY_ PROGRAMME (PROGRAMME _ID) ON DELETECASCADE,
CARD_NO INTEGER);      
        <br><br>
INSERT INTO PUBLISHER VALUES (‘MCGRAW-HILL’, 9989076587, ‘BANGALORE’);
INSERT INTO PUBLISHER VALUES (‘PEARSON’, 9889076565, ‘NEWDELHI’);
INSERT INTO PUBLISHER VALUES (‘RANDOM HOUSE’, 7455679345, ‘HYDRABAD’); 
INSERT INTO PUBLISHER VALUES (‘HACHETTE LIVRE’, 8970862340, ‘CHENAI’);
INSERT INTO PUBLISHER VALUES (‘GRUPO PLANETA’, 7756120238, ‘BANGALORE’);
        <br><br>
INSERT INTO BOOK VALUES (1,’DBMS’,’JAN-2017’, ‘MCGRAW-HILL’); 
INSERT INTO BOOK VALUES (2,’ADBMS’,’JUN-2016’, ‘MCGRAW-HILL’);
INSERT INTO BOOK VALUES (3,’CN’,’SEP-2016’, ‘PEARSON’);
INSERT INTO BOOK VALUES (4,’CG’,’SEP-2015’, ‘GRUPO PLANETA’); 
INSERT INTO BOOK VALUES (5,’OS’,’MAY-2016’, ‘PEARSON’);
        <br><br>
INSERT INTO BOOK_AUTHORS VALUES (’NAVATHE’, 1);
INSERT INTO BOOK_AUTHORS VALUES (’NAVATHE’, 2); 
INSERT INTO BOOK_AUTHORS VALUES (’TANENBAUM’, 3); 
INSERT INTO BOOK_AUTHORS VALUES (’EDWARD ANGEL’, 4); 
INSERT INTO BOOK_AUTHORS VALUES (’GALVIN’, 5);
        <br><br>
INSERT INTO LIBRARY_ PROGRAMME VALUES(10,’RRNAGAR’,’BANGALORE’);
INSERT INTO LIBRARY_ PROGRAMME VALUES (11,’APSCE’,’BANGALORE’); 
INSERT INTO LIBRARY_ PROGRAMME VALUES (12,’N R COLONY’, ’BANGALORE’);
INSERT INTO LIBRARY_ PROGRAMME VALUES (13,’NITTE’,’MANGALORE’);
INSERT INTO LIBRARY_ PROGRAMME VALUES (14,’MANIPAL’,’UDUPI’);
        <br><br>
INSERT INTO BOOK_COPIES VALUES (10,1, 10);
INSERT INTO BOOK_COPIES VALUES (5,1, 11);
INSERT INTO BOOK_COPIES VALUES (2,2, 12);
INSERT INTO BOOK_COPIES VALUES (5,2, 13);
INSERT INTO BOOK_COPIES VALUES (7,3, 14);
INSERT INTO BOOK_COPIES VALUES (1,5, 10);
INSERT INTO BOOK_COPIES VALUES (3,4, 11);
        <br><br>
INSERT INTO BOOK_LENDING VALUES (’01-JAN-17’,’01-JUN-17’, 1, 10, 101);
INSERT INTO BOOK_LENDING VALUES (’11-JAN-17’,’11-MAR-17’, 3, 14, 101);
INSERT INTO BOOK_LENDING VALUES (’21-FEB-17’,’21-APR-17’, 2, 13, 101);
INSERT INTO BOOK_LENDING VALUES (’15-MAR-17’,’15-JUL-17’, 4, 11, 101);
INSERT INTO BOOK_LENDING VALUES (‘12-APR-17’,’12-MAY-17’, 1, 11, 104);
        <br><br>
<b>SELECT B.BOOK_ID, B.TITLE, B.PUBLISHER_NAME, A.AUTHOR_NAME, C.NO_OF_COPIES, L. PROGRAMME _ID
FROM BOOK B, BOOK_AUTHORS A, BOOK_COPIES C, LIBRARY_ PROGRAMME L
WHERE B.BOOK_ID=A.BOOK_ID
AND B.BOOK_ID=C.BOOK_ID
AND L. PROGRAMME _ID=C. PROGRAMME _ID;
    <br><br>
    SELECT CARD_NO FROM BOOK_LENDING
WHERE DATE_OUT BETWEEN ’01-JAN-2017’ AND ’01-JUL-2017’ GROUP BY CARD_NO
HAVING COUNT (*)>3;
    <br><br>
    SELECT CARD_NO FROM BOOK_LENDING
WHERE DATE_OUT BETWEEN ’01-JAN-2017’ AND ’01-JUL-2017’ GROUP BY CARD_NO
HAVING COUNT (*)>3;
    <br><br>
    CREATE VIEW V_PUBLICATION AS SELECT PUB_YEAR
FROM BOOK;
    <br><br>
    CREATE VIEW V_BOOKS AS
SELECT B.BOOK_ID, B.TITLE, C.NO_OF_COPIES FROM BOOK B, BOOK_COPIES C,
LIBRARY_ PROGRAMME L
WHERE B.BOOK_ID=C.BOOK_ID AND
C. PROGRAMME _ID=L.PROGRAMME _ID;
</b>
    </p>
</body>
</html>
